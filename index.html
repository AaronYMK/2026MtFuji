<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026 日本關東之旅</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&family=Shippori+Mincho:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #f7f5f0; /* 米色 */
            --card-bg: #ffffff;
            --text-main: #333333;
            --text-sub: #666666;
            --accent: #d45d5d; /* 日式朱紅 - 用於必吃/重點 */
            --nav-bg: #2c3e50;
            --tag-transport: #e8f4f8; --text-transport: #0077b6;
            --tag-food: #fff0f0; --text-food: #d63031;
            --tag-spot: #f0f7f0; --text-spot: #27ae60;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            margin: 0;
            padding-bottom: 80px; /* 底部導航空間 */
        }

        /* 標題區 */
        header {
            background: var(--card-bg);
            padding: 20px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        h1 {
            font-family: 'Shippori Mincho', serif;
            margin: 0;
            font-size: 1.2rem;
            letter-spacing: 2px;
        }
        .subtitle { font-size: 0.8rem; color: var(--text-sub); margin-top: 5px; }

        /* 天氣區塊 */
        .weather-widget {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            margin: 15px;
            padding: 15px;
            border-radius: 12px;
            color: #444;
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-size: 0.9rem;
        }

        /* 行程卡片 */
        .timeline { padding: 10px 15px; }
        .card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.03);
            position: relative;
            border-left: 4px solid transparent;
            transition: transform 0.2s;
        }
        .card:active { transform: scale(0.98); }

        /* 分類顏色條 */
        .card.transport { border-left-color: var(--text-transport); }
        .card.food { border-left-color: var(--text-food); }
        .card.spot { border-left-color: var(--text-spot); }

        .time { font-weight: 700; color: var(--text-sub); font-size: 0.9rem; margin-bottom: 5px; display: block; }
        .title { font-size: 1.1rem; font-weight: 700; margin-bottom: 5px; }
        
        /* 標籤 */
        .tags { display: flex; gap: 5px; flex-wrap: wrap; margin-bottom: 8px; }
        .tag { font-size: 0.75rem; padding: 2px 8px; border-radius: 4px; font-weight: 500; }
        .tag.highlight { background-color: #fff3cd; color: #856404; border: 1px solid #ffeeba; }

        /* 導遊解說 */
        .guide-text {
            font-size: 0.85rem;
            color: var(--text-sub);
            line-height: 1.6;
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px dashed #eee;
            background: #fafafa;
            padding: 10px;
            border-radius: 8px;
        }
        .must-do { color: var(--accent); font-weight: 700; }

        /* 按鈕區 */
        .actions { margin-top: 12px; display: flex; gap: 10px; }
        .btn {
            flex: 1;
            padding: 8px;
            border-radius: 6px;
            border: none;
            font-size: 0.85rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
            text-decoration: none;
        }
        .btn-nav { background-color: #f1f3f5; color: #495057; }
        .btn-nav:hover { background-color: #e9ecef; }

        /* 底部導航 */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: white;
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
            z-index: 1000;
        }
        .nav-item {
            text-align: center;
            color: #999;
            font-size: 0.7rem;
            background: none;
            border: none;
            cursor: pointer;
        }
        .nav-item i { display: block; font-size: 1.2rem; margin-bottom: 3px; }
        .nav-item.active { color: var(--accent); }

        /* 資訊頁面 */
        .info-section { display: none; padding: 15px; }
        .info-card { background: white; padding: 20px; border-radius: 12px; margin-bottom: 15px; }
        .info-row { display: flex; justify-content: space-between; margin-bottom: 10px; border-bottom: 1px solid #f0f0f0; padding-bottom: 5px; }
        
        /* 方案切換 */
        .plan-toggle {
            display: flex;
            justify-content: center;
            margin: 10px 15px;
            background: #e9ecef;
            border-radius: 20px;
            padding: 4px;
        }
        .plan-btn {
            flex: 1;
            border: none;
            background: transparent;
            padding: 8px;
            border-radius: 16px;
            font-size: 0.9rem;
            cursor: pointer;
        }
        .plan-btn.active { background: white; shadow: 0 2px 5px rgba(0,0,0,0.1); font-weight: bold; }

    </style>
</head>
<body>

<header>
    <h1 id="day-title">Day 1: 出發與新宿</h1>
    <div class="subtitle" id="day-date">2026-01-26</div>
</header>

<div id="weather-container" class="weather-widget">
    <div><i class="fas fa-spinner fa-spin"></i> 載入當地天氣預報中...</div>
</div>

<div id="content-area" class="timeline">
    </div>

<nav class="bottom-nav">
    <button class="nav-item active" onclick="switchDay(0)"><i class="fas fa-plane"></i>Day 1</button>
    <button class="nav-item" onclick="switchDay(1)"><i class="fas fa-mountain"></i>Day 2</button>
    <button class="nav-item" onclick="switchDay(2)"><i class="fas fa-torii-gate"></i>Day 3</button>
    <button class="nav-item" onclick="switchDay(3)"><i class="fas fa-camera"></i>Day 4</button>
    <button class="nav-item" onclick="switchDay(4)"><i class="fas fa-shopping-bag"></i>Day 5</button>
    <button class="nav-item" onclick="switchTab('info')"><i class="fas fa-info-circle"></i>資訊</button>
</nav>

<script>
    // 資料結構：包含所有行程資訊、導航連結與導遊解說
    const itineraryData = [
        {
            day: "Day 1",
            date: "2026-01-26",
            title: "出發 & 新宿之夜",
            locationData: { lat: 35.6938, lon: 139.7034 }, // 新宿
            events: [
                { time: "06:30", title: "機場接送出門", type: "transport", location: "Banqiao District, New Taipei City", desc: "準時出發前往桃園機場。" },
                { time: "09:30", title: "TPE 起飛 (CI 100)", type: "transport", location: "Taoyuan International Airport", desc: "預計 13:30 抵達東京成田 (NRT)。", highlight: "航班 CI 100" },
                { time: "15:14", title: "搭乘成田特快 NEX", type: "transport", location: "Narita Airport Terminal 2", desc: "前往 B1 搭乘 JR。目標班次：成田32號 (15:14) 或 34號 (15:44)。", highlight: "車票記得收好" },
                { time: "16:45", title: "抵達 JR 新宿駅", type: "transport", location: "Shinjuku Station", desc: "人潮眾多，請注意隨身行李。" },
                { time: "17:00", title: "Check-in: Yksi Stay", type: "spot", location: "Yksi Stay Shinjuku", desc: "先放置行李，稍作休息。" },
                { time: "18:00", title: "晚餐：牛かつもと村", type: "food", location: "Gyukatsu Motomura Shinjuku", desc: "人氣炸牛排店。建議將牛排在石板上稍微炙燒，口感更佳。", highlight: "必吃：炸牛排定食" },
                { time: "19:00", title: "新宿逛街 & 扭蛋", type: "spot", location: "Lumine Est Shinjuku", desc: "順序：Lumine Est (年輕潮流) → Adidas → BicCamera (電器) → C-Pla (扭蛋) → Gacha no Mori。", highlight: "C-Pla 扭蛋專門店" },
                { time: "22:30", title: "宵夜：一蘭拉麵", type: "food", location: "Ichiran Shinjuku", desc: "日本經典豚骨拉麵，可選擇麵條硬度與湯頭濃度。", highlight: "記得加點半熟蛋" }
            ]
        },
        {
            day: "Day 2",
            date: "2026-01-27",
            title: "富士山河口湖自駕",
            locationData: { lat: 35.4981, lon: 138.7686 }, // 河口湖
            events: [
                { time: "07:30", title: "富士回遊 3號", type: "transport", location: "Shinjuku Station Platform 9", desc: "JR新宿中央本線特急 9、10號月台。直達河口湖。", highlight: "指定席車票" },
                { time: "09:30", title: "抵達河口湖 & 取車", type: "transport", location: "Budget Rent a Car Kawaguchiko", desc: "前往 Budget 租車取車，檢查車況。", highlight: "準備：護照、駕照日譯本" },
                { time: "10:45", title: "忍野八海", type: "spot", location: "Oshino Hakkai", desc: "富士山融雪過濾後的八個清泉。水質極度清澈，被譽為神之泉。", highlight: "必看：湧池 (最深最藍)" },
                { time: "12:00", title: "午餐：こし路 (Koshiji)", type: "food", location: "Koshiji Oshino", desc: "在地人推薦的日式食堂。", highlight: "必吃：牛肉燉飯" },
                { time: "13:45", title: "Kaba 水陸巴士", type: "spot", location: "Yamanakako Kaba Bus", desc: "體驗車子直接衝進山中湖的快感，近距離欣賞富士山。" },
                { time: "14:30", title: "山中湖巡禮 & 下午茶", type: "spot", location: "Hirano no Hama", desc: "平野之濱拍逆富士 → 長池親水公園 → The Park 吃鬆餅看湖景。", highlight: "The Park 鬆餅" },
                { time: "16:30", title: "住宿：秀峰閣湖月", type: "spot", location: "Shuhoukaku Kogetsu", desc: "絕景溫泉旅館，所有房間面湖面富士山。晚餐前建議先泡湯。", highlight: "逆富士絕景住宿" }
            ]
        },
        {
            day: "Day 3",
            date: "2026-01-28",
            title: "河口湖深度遊",
            locationData: { lat: 35.5165, lon: 138.7562 },
            hasPlanB: true,
            eventsA: [ // 晴天方案
                { time: "10:30", title: "睡到自然醒", type: "spot", location: "Shuhoukaku Kogetsu", desc: "享受悠閒的早晨與窗外美景。" },
                { time: "10:45", title: "午餐：手打うどん 彩花", type: "food", location: "Teuchi Udon Ayaka", desc: "吉田烏龍麵名店，麵條極具嚼勁。", highlight: "必點：肉烏龍麵" },
                { time: "11:45", title: "甜點時光 (二選一)", type: "food", location: "La Verdure Kimura", desc: "選項一：木村屋布丁 / 選項二：Fujisan Shokupan 富士山吐司。", highlight: "富士山造型麵包" },
                { time: "12:15", title: "河口湖纜車 & 兔子神社", type: "spot", location: "Mt. Fuji Panoramic Ropeway", desc: "搭纜車上天上山公園，敲響天上之鐘。", highlight: "狸貓與兔子傳說" },
                { time: "14:00", title: "河口淺間神社", type: "spot", location: "Kawaguchi Asama Shrine", desc: "千年古杉圍繞的神聖之地，世界文化遺產的一部分。" },
                { time: "14:30", title: "河口湖遙拝所 (天空鳥居)", type: "spot", location: "Tenku no Torii", desc: "需穿防滑鞋走路上山。拍攝鳥居框住富士山的絕景。", highlight: "IG爆紅打卡點" },
                { time: "15:30", title: "下午茶：HanaCafe Kikyou", type: "food", location: "HanaCafe Kikyou", desc: "桔梗信玄餅直營咖啡廳。", highlight: "必吃：信玄餅冰淇淋" },
                { time: "16:30", title: "返回：秀峰閣湖月", type: "spot", location: "Shuhoukaku Kogetsu", desc: "享受旅館晚餐與溫泉。" }
            ],
            eventsB: [ // 雪天方案
                { time: "10:30", title: "睡到自然醒", type: "spot", location: "Shuhoukaku Kogetsu", desc: "雪天行車請注意安全。" },
                { time: "10:45", title: "午餐：手打うどん 彩花", type: "food", location: "Teuchi Udon Ayaka", desc: "熱騰騰的烏龍麵暖身。" },
                { time: "11:45", title: "甜點時光 (二選一)", type: "food", location: "La Verdure Kimura", desc: "木村屋布丁 或 Fujisan Shokupan。" },
                { time: "12:30", title: "音樂盒之森美術館", type: "spot", location: "Kawaguchiko Music Forest Museum", desc: "歐洲庭園風格，室內活動避雪首選。欣賞自動演奏樂器與沙畫表演。", highlight: "室內避雪首選" },
                { time: "14:00", title: "河口淺間神社", type: "spot", location: "Kawaguchi Asama Shrine", desc: "雪中的神社更顯莊嚴肅穆。" },
                { time: "15:00", title: "下午茶：HanaCafe Kikyou", type: "food", location: "HanaCafe Kikyou", desc: "享受甜點休息。" },
                { time: "16:30", title: "返回：秀峰閣湖月", type: "spot", location: "Shuhoukaku Kogetsu", desc: "雪見溫泉是人生最高享受。" }
            ]
        },
        {
            day: "Day 4",
            date: "2026-01-29",
            title: "下吉田懷舊散策",
            locationData: { lat: 35.4849, lon: 138.8037 }, // 下吉田
            events: [
                { time: "09:30", title: "Check-out & 還車", type: "transport", location: "Budget Rent a Car Kawaguchiko", desc: "加油滿油還車。" },
                { time: "10:15", title: "Fujiyama Cookie & 買票", type: "food", location: "Fujiyama Cookie", desc: "購買富士山造型餅乾當伴手禮。搭乘 10:31 車次前往富士山站。" },
                { time: "10:36", title: "富士山站寄放行李", type: "transport", location: "Fujisan Station", desc: "投幣式置物櫃寄放大型行李。" },
                { time: "11:14", title: "抵達下吉田站", type: "transport", location: "Shimoyoshida Station", desc: "開始步行行程。" },
                { time: "12:00", title: "新倉山淺間公園", type: "spot", location: "Chureito Pagoda", desc: "需爬398階梯。著名的「五重塔+富士山+櫻花(季節)」明信片視角。", highlight: "經典明信片視角" },
                { time: "13:15", title: "小室淺間神社", type: "spot", location: "Omuro Sengen Shrine", desc: "歷史悠久的神社，可求籤運。" },
                { time: "13:45", title: "FabCafe Fuji", type: "food", location: "FabCafe Fuji", desc: "文青咖啡廳享用輕食午餐。" },
                { time: "14:30", title: "甜點 (二選一)", type: "food", location: "Honcho Chacha", desc: "選項：本町茶茶 (抹茶) 或 金精軒 (水信玄餅)。" },
                { time: "14:45", title: "本町通懷舊商店街", type: "spot", location: "Shimoyoshida Honcho Street", desc: "日川時計店前是著名拍照點，請注意交通安全，不要阻礙車輛。", highlight: "昭和風街道" },
                { time: "15:00", title: "金鳥居", type: "spot", location: "Kanadorii", desc: "富士山站附近的大型鳥居，彷彿是通往富士山的入口。" },
                { time: "15:47", title: "富士回遊 94號", type: "transport", location: "Fujisan Station", desc: "搭乘特急返回新宿。" },
                { time: "17:45", title: "抵達 JR 新宿", type: "transport", location: "Shinjuku Station", desc: "前往飯店。" },
                { time: "18:15", title: "Check-in: The Knot", type: "spot", location: "The Knot Tokyo Shinjuku", desc: "搭計程車前往飯店，設計感強烈的精品旅館。" },
                { time: "19:30", title: "晚餐：焼肉うしふじ", type: "food", location: "Yakiniku Ushifuji", desc: "高級燒肉晚餐。餐後逛唐吉訶德。", highlight: "必吃：A5和牛" }
            ]
        },
        {
            day: "Day 5",
            date: "2026-01-30",
            title: "最後採買 & 返程",
            locationData: { lat: 35.6938, lon: 139.7034 },
            events: [
                { time: "08:45", title: "早餐/早午餐：らぁ麺や 嶋", type: "food", location: "Ramenya Shima", desc: "超人氣拉麵名店（需確認是否需早起排隊整理券）。", highlight: "東京頂級拉麵" },
                { time: "11:00", title: "寄放行李", type: "transport", location: "Busta Shinjuku", desc: "搭計程車到新宿高速巴士總站(Busta)寄放行李，方便之後去機場。" },
                { time: "11:30", title: "午餐：Al Dente", type: "food", location: "Al Dente Shinjuku", desc: "知名的義大利麵店。" },
                { time: "12:30", title: "最後衝刺：高島屋 & 手創館", type: "spot", location: "Takashimaya Shinjuku", desc: "高島屋百貨與 Tokyu Hands 購買精緻生活用品與伴手禮。" },
                { time: "14:00", title: "下午茶：Ochobohan", type: "food", location: "Ochobohan Shinjuku", desc: "Lumine Est 內的抹茶甜點套餐，完美的句點。", highlight: "抹茶愛好者" },
                { time: "15:08", title: "成田特快 NEX", type: "transport", location: "Shinjuku Station Platform 5", desc: "前往 5、6號月台搭乘成田37號。16:31 抵達機場。", highlight: "最後的電車" },
                { time: "19:30", title: "起飛 (CI)", type: "transport", location: "Narita Airport", desc: "22:45 抵達 TPE，接送回家。" }
            ]
        }
    ];

    let currentDay = 0;
    let currentPlan = 'A'; // 'A' for Sun, 'B' for Snow (Day 3 only)

    function init() {
        renderDay(0);
        updateWeather();
    }

    function switchDay(index) {
        currentDay = index;
        // 更新底部導航狀態
        document.querySelectorAll('.nav-item').forEach((btn, i) => {
            if(i === index) btn.classList.add('active');
            else btn.classList.remove('active');
        });
        // 切換回內容顯示（如果從資訊頁回來）
        document.getElementById('content-area').style.display = 'block';
        document.querySelector('.info-section').style.display = 'none';
        
        renderDay(index);
        updateWeather();
        window.scrollTo(0, 0);
    }

    function switchTab(tabName) {
        if(tabName === 'info') {
            document.getElementById('content-area').style.display = 'none';
            document.querySelector('.info-section').style.display = 'block';
            document.querySelectorAll('.nav-item').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.nav-item')[5].classList.add('active'); // info button
            
            // 隱藏頂部日期與天氣
            document.querySelector('header').style.display = 'none';
            document.querySelector('.weather-widget').style.display = 'none';
        }
    }

    function togglePlan(plan) {
        currentPlan = plan;
        renderDay(2); // Re-render Day 3
    }

    function renderDay(index) {
        const data = itineraryData[index];
        const container = document.getElementById('content-area');
        
        // 恢復 Header 顯示
        document.querySelector('header').style.display = 'block';
        document.querySelector('.weather-widget').style.display = 'flex';

        document.getElementById('day-title').textContent = `${data.day}: ${data.title}`;
        document.getElementById('day-date').textContent = data.date;

        let html = '';

        // 特殊處理 Day 3 的方案切換按鈕
        if(data.hasPlanB) {
            html += `
            <div class="plan-toggle">
                <button class="plan-btn ${currentPlan === 'A' ? 'active' : ''}" onclick="togglePlan('A')">☀️ 方案一 (晴)</button>
                <button class="plan-btn ${currentPlan === 'B' ? 'active' : ''}" onclick="togglePlan('B')">❄️ 方案二 (雪)</button>
            </div>`;
        }

        const events = (data.hasPlanB) ? (currentPlan === 'A' ? data.eventsA : data.eventsB) : data.events;

        events.forEach(event => {
            let icon = 'fa-map-marker-alt';
            if(event.type === 'transport') icon = 'fa-train';
            if(event.type === 'food') icon = 'fa-utensils';

            const highlightHtml = event.highlight ? `<span class="tag highlight"><i class="fas fa-star"></i> ${event.highlight}</span>` : '';
            
            html += `
            <div class="card ${event.type}">
                <span class="time">${event.time}</span>
                <div class="title">${event.title}</div>
                <div class="tags">
                    <span class="tag" style="background:#eee">${event.type.toUpperCase()}</span>
                    ${highlightHtml}
                </div>
                <div class="guide-text">
                    ${event.desc}
                </div>
                <div class="actions">
                    <a href="https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(event.location)}" target="_blank" class="btn btn-nav">
                        <i class="fas fa-location-arrow"></i> 導航
                    </a>
                </div>
            </div>
            `;
        });

        container.innerHTML = html;
    }

    // 使用 Open-Meteo 免費 API 獲取天氣 (無需 Key)
    async function updateWeather() {
        const data = itineraryData[currentDay];
        const widget = document.getElementById('weather-container');
        widget.innerHTML = '<div><i class="fas fa-spinner fa-spin"></i> 正在載入天氣...</div>';

        try {
            // 這裡抓取的是"目前"的天氣作為示範，因為免費 API 無法準確預測 2026 年
            // 如果要更精準，可以只顯示該地點的"平均氣溫"作為參考
            const response = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${data.locationData.lat}&longitude=${data.locationData.lon}&current_weather=true`);
            const weather = await response.json();
            
            const temp = weather.current_weather.temperature;
            const code = weather.current_weather.weathercode;
            let weatherDesc = "晴時多雲";
            let icon = "fa-sun";

            // 簡單的天氣代碼轉換
            if(code > 3) { weatherDesc = "多雲/陰"; icon = "fa-cloud"; }
            if(code > 50) { weatherDesc = "有雨"; icon = "fa-umbrella"; }
            if(code > 70) { weatherDesc = "有雪"; icon = "fa-snowflake"; }

            widget.innerHTML = `
                <div><i class="fas ${icon}"></i> ${weatherDesc} <span style="font-size:1.2em; font-weight:bold; margin-left:10px">${temp}°C</span></div>
                <div style="font-size:0.8em; opacity:0.8">目前當地概況</div>
            `;
        } catch (e) {
            widget.innerHTML = '無法載入天氣資訊';
        }
    }

    // 初始化 Info 頁面結構
    const infoHtml = `
    <div class="info-section">
        <h2><i class="fas fa-plane"></i> 航班資訊</h2>
        <div class="info-card">
            <div class="info-row"><span>去程</span> <span>CI 100 (09:30 TPE - 13:30 NRT)</span></div>
            <div class="info-row"><span>回程</span> <span>CI (19:30 NRT - 22:45 TPE)</span></div>
        </div>

        <h2><i class="fas fa-hotel"></i> 住宿資訊</h2>
        <div class="info-card">
            <div class="info-row"><strong>Day 1:</strong> <span>Yksi Stay Shinjuku</span></div>
            <div class="info-row"><strong>Day 2-3:</strong> <span>秀峰閣湖月 (河口湖)</span></div>
            <div class="info-row"><strong>Day 4:</strong> <span>The Knot Tokyo Shinjuku</span></div>
        </div>

        <h2><i class="fas fa-phone-alt"></i> 緊急聯絡</h2>
        <div class="info-card">
            <div class="info-row"><span>警察局</span> <span>110</span></div>
            <div class="info-row"><span>救護車/火警</span> <span>119</span></div>
            <div class="info-row"><span>旅外國人急難救助</span> <span>+886-800-085-095</span></div>
        </div>
    </div>
    `;
    document.body.insertAdjacentHTML('beforeend', infoHtml);

    init();
</script>
</body>
</html>
